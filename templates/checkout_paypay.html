{% extends "gallery_base.html" %}
{% block title %}PayPayæ±ºæ¸ˆ{% endblock %}

{% block content %}
<div class="paypay-container">
  <div class="paypay-card">
    <div class="paypay-header">
      <h1>ğŸ“± PayPayã§ãŠæ”¯æ‰•ã„</h1>
    </div>
    
    <div class="paypay-body">
      <div class="qr-container">
        {% if paypay_data.url %}
          <img src="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data={{ paypay_data.url | urlencode }}" alt="PayPay QRã‚³ãƒ¼ãƒ‰" class="qr-image">
        {% else %}
          <div class="qr-placeholder">QRã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã§ãã¾ã›ã‚“ã§ã—ãŸ</div>
        {% endif %}
      </div>
      
      <div class="paypay-info">
        <p class="paypay-amount">
          ãŠæ”¯æ‰•ã„é‡‘é¡: <strong>Â¥{{ "{:,}".format(order.total_amount) }}</strong>
        </p>
        <p class="paypay-desc">
          PayPayã‚¢ãƒ—ãƒªã§QRã‚³ãƒ¼ãƒ‰ã‚’èª­ã¿å–ã‚Šã€<br>
          ãŠæ”¯æ‰•ã„ã‚’å®Œäº†ã—ã¦ãã ã•ã„ã€‚
        </p>
      </div>
      
      {% if paypay_data.url %}
      <a href="{{ paypay_data.url }}" class="btn btn-primary btn-lg" style="width: 100%;">
        PayPayã‚¢ãƒ—ãƒªã§é–‹ã
      </a>
      {% endif %}
      
      <div class="paypay-note">
        <p>ãŠæ”¯æ‰•ã„å®Œäº†å¾Œã€è‡ªå‹•çš„ã«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãƒšãƒ¼ã‚¸ã«ç§»å‹•ã—ã¾ã™ã€‚</p>
        <p>ç§»å‹•ã—ãªã„å ´åˆã¯ã€ä¸‹è¨˜ã®ãƒªãƒ³ã‚¯ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„ã€‚</p>
        <a href="{{ url_for('checkout_complete', order_id=order.id, status='success') }}">
          ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãƒšãƒ¼ã‚¸ã¸
        </a>
      </div>
    </div>
  </div>
</div>

<style>
  .paypay-container {
    display: flex;
    justify-content: center;
    padding: 2rem;
  }
  
  .paypay-card {
    width: 100%;
    max-width: 400px;
    background: var(--dark);
    border: 1px solid var(--border);
    border-radius: 16px;
    overflow: hidden;
  }
  
  .paypay-header {
    padding: 1.5rem;
    text-align: center;
    border-bottom: 1px solid var(--border);
  }
  
  .paypay-header h1 {
    font-size: 1.25rem;
    font-weight: 700;
  }
  
  .paypay-body {
    padding: 2rem;
  }
  
  .qr-container {
    display: flex;
    justify-content: center;
    margin-bottom: 1.5rem;
  }
  
  .qr-image {
    width: 200px;
    height: 200px;
    border-radius: 8px;
    background: white;
    padding: 1rem;
  }
  
  .qr-placeholder {
    width: 200px;
    height: 200px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--gray-800);
    border-radius: 8px;
    color: var(--gray-500);
    text-align: center;
    padding: 1rem;
  }
  
  .paypay-info {
    text-align: center;
    margin-bottom: 1.5rem;
  }
  
  .paypay-amount {
    font-size: 1.25rem;
    margin-bottom: 1rem;
  }
  
  .paypay-amount strong {
    font-size: 1.5rem;
    color: var(--light);
  }
  
  .paypay-desc {
    color: var(--gray-400);
    line-height: 1.8;
  }
  
  .paypay-note {
    margin-top: 1.5rem;
    padding-top: 1.5rem;
    border-top: 1px solid var(--border);
    text-align: center;
    font-size: 0.8rem;
    color: var(--gray-500);
  }
  
  .paypay-note p {
    margin-bottom: 0.5rem;
  }
  
  .paypay-note a {
    color: var(--primary);
    text-decoration: none;
  }
</style>
{% endblock %}
