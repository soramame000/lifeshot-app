{% extends "gallery_base.html" %}
{% block title %}{% if status == 'success' %}ã”è³¼å…¥ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™{% else %}æ±ºæ¸ˆãŒã‚­ãƒ£ãƒ³ã‚»ãƒ«ã•ã‚Œã¾ã—ãŸ{% endif %}{% endblock %}

{% block content %}
<div class="complete-container">
  {% if status == 'success' %}
  <div class="complete-card success">
    <div class="complete-icon">âœ…</div>
    <h1>ã”è³¼å…¥ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ï¼</h1>
    <p class="complete-message">
      æ±ºæ¸ˆãŒå®Œäº†ã—ã¾ã—ãŸã€‚<br>
      ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãƒªãƒ³ã‚¯ã‚’ãƒ¡ãƒ¼ãƒ«ã§ãŠé€ã‚Šã—ã¾ã—ãŸã€‚
    </p>
    
    <div class="order-info">
      <div class="order-info-row">
        <span>æ³¨æ–‡ç•ªå·</span>
        <span>#{{ order.id }}</span>
      </div>
      <div class="order-info-row">
        <span>å†™çœŸæšæ•°</span>
        <span>{{ order.items|length }}æš</span>
      </div>
      <div class="order-info-row">
        <span>ãŠæ”¯æ‰•ã„é‡‘é¡</span>
        <span>Â¥{{ "{:,}".format(order.total_amount) }}</span>
      </div>
    </div>
    
    {% if order.download_token %}
    <a href="{{ url_for('download_page', token=order.download_token) }}" class="btn btn-primary btn-lg">
      ğŸ“¥ å†™çœŸã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
    </a>
    <p class="download-note">
      ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãƒªãƒ³ã‚¯ã¯7æ—¥é–“æœ‰åŠ¹ã§ã™
    </p>
    {% endif %}
  </div>
  
  {% else %}
  <div class="complete-card canceled">
    <div class="complete-icon">âŒ</div>
    <h1>æ±ºæ¸ˆãŒã‚­ãƒ£ãƒ³ã‚»ãƒ«ã•ã‚Œã¾ã—ãŸ</h1>
    <p class="complete-message">
      ãŠæ”¯æ‰•ã„ãŒå®Œäº†ã—ã¦ã„ã¾ã›ã‚“ã€‚<br>
      å†åº¦è³¼å…¥æ‰‹ç¶šãã‚’è¡Œã£ã¦ãã ã•ã„ã€‚
    </p>
    
    {% if order.event %}
    <a href="{{ url_for('gallery_photos', event_code=order.event.event_code) }}" class="btn btn-primary btn-lg">
      ã‚®ãƒ£ãƒ©ãƒªãƒ¼ã«æˆ»ã‚‹
    </a>
    {% endif %}
  </div>
  {% endif %}
</div>

<style>
  .complete-container {
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 60vh;
    padding: 2rem;
  }
  
  .complete-card {
    text-align: center;
    max-width: 480px;
    width: 100%;
    background: var(--dark);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 3rem 2rem;
  }
  
  .complete-card.success {
    border-color: rgba(16, 185, 129, 0.3);
  }
  
  .complete-card.canceled {
    border-color: rgba(239, 68, 68, 0.3);
  }
  
  .complete-icon {
    font-size: 4rem;
    margin-bottom: 1.5rem;
  }
  
  .complete-card h1 {
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: 1rem;
  }
  
  .complete-message {
    color: var(--gray-400);
    margin-bottom: 2rem;
    line-height: 1.8;
  }
  
  .order-info {
    background: var(--gray-800);
    border-radius: 8px;
    padding: 1rem;
    margin-bottom: 2rem;
  }
  
  .order-info-row {
    display: flex;
    justify-content: space-between;
    padding: 0.5rem 0;
    border-bottom: 1px solid var(--border);
  }
  
  .order-info-row:last-child {
    border-bottom: none;
    font-weight: 600;
  }
  
  .download-note {
    font-size: 0.8rem;
    color: var(--gray-500);
    margin-top: 1rem;
  }
</style>
{% endblock %}
