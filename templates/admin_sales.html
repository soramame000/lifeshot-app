{% extends "admin_base.html" %}
{% block title %}å£²ä¸Šç®¡ç† - LifeShot{% endblock %}
{% block page_title %}å£²ä¸Šç®¡ç†{% endblock %}

{% block content %}
<div class="stats-grid">
  <div class="stat-card">
    <div class="stat-label">ç´¯è¨ˆGMVï¼ˆæµé€šç·é¡ï¼‰</div>
    <div class="stat-value">Â¥{{ "{:,}".format(total_gmv) }}</div>
  </div>
  <div class="stat-card">
    <div class="stat-label">ç´¯è¨ˆãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ æ‰‹æ•°æ–™ï¼ˆ15%ï¼‰</div>
    <div class="stat-value">Â¥{{ "{:,}".format(total_platform_fee) }}</div>
  </div>
</div>

<div class="card">
  <div class="card-header">
    <h3 class="card-title">ğŸ’° å…¨æ³¨æ–‡ä¸€è¦§</h3>
    <span class="text-muted">{{ orders|length }}ä»¶ã®æ³¨æ–‡</span>
  </div>
  {% if orders %}
  <div class="table-container">
    <table class="table">
      <thead>
        <tr>
          <th>æ³¨æ–‡ID</th>
          <th>æ—¥æ™‚</th>
          <th>ã‚«ãƒ¡ãƒ©ãƒãƒ³</th>
          <th>ã‚¤ãƒ™ãƒ³ãƒˆ</th>
          <th>è³¼å…¥è€…</th>
          <th>æšæ•°</th>
          <th class="text-right">GMV</th>
          <th class="text-right">æ‰‹æ•°æ–™</th>
          <th class="text-right">ã‚«ãƒ¡ãƒ©ãƒãƒ³å–ã‚Šåˆ†</th>
        </tr>
      </thead>
      <tbody>
        {% for order in orders %}
        <tr>
          <td>#{{ order.id }}</td>
          <td class="text-muted">{{ order.created_at.strftime('%Y/%m/%d %H:%M') }}</td>
          <td>{{ order.event.photographer.name if order.event and order.event.photographer else '-' }}</td>
          <td>{{ order.event.title if order.event else '-' }}</td>
          <td>{{ order.buyer_name }}</td>
          <td>{{ order.items|length }}æš</td>
          <td class="text-right">Â¥{{ "{:,}".format(order.total_amount) }}</td>
          <td class="text-right" style="color: var(--primary);">Â¥{{ "{:,}".format(order.platform_fee) }}</td>
          <td class="text-right">Â¥{{ "{:,}".format(order.photographer_amount) }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  {% else %}
  <div class="card-body">
    <p class="text-muted text-center">ã¾ã æ³¨æ–‡ãŒã‚ã‚Šã¾ã›ã‚“</p>
  </div>
  {% endif %}
</div>
{% endblock %}

